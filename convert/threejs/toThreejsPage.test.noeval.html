<html><head><title>JSxCAD Viewer</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
<style>
body {
  color: #cccccc;
  font-family: Monospace;
  font-size: 13px;
  text-align: left;
  background-color: #050505;
  margin: 0px;
  overflow: hidden;
}

.dg { position: absolute; top: 2px; left: 2px }


</style>
<link href="https://codemirror.net/lib/codemirror.css" rel="stylesheet"></head><body id="body"><!-- CodeMirror -->




<!-- ThreeJS -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/three.js/87/three.min.js"></script>
<script type="text/javascript" src="https://cdn.rawgit.com/mrdoob/stats.js/master/build/stats.min.js"></script>
<script type="text/javascript" src="https://cdn.rawgit.com/mrdoob/three.js/master/examples/js/controls/TrackballControls.js"></script>
<script type="text/javascript" src="https://cdn.rawgit.com/dataarts/dat.gui/master/build/dat.gui.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/ami.js//0.0.20/ami.min.js"></script>
<!-- FileSaver -->
<script>

(function (global, factory) {
  if (typeof define === "function" && define.amd) {
    define([], factory);
  } else if (typeof exports !== "undefined") {
    factory();
  } else {
    var mod = {
      exports: {}
    };
    factory();
    global.FileSaver = mod.exports;
  }
})(this, function () {
  "use strict";

  /*
  * FileSaver.js
  * A saveAs() FileSaver implementation.
  *
  * By Eli Grey, http://eligrey.com
  *
  * License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)
  * source  : http://purl.eligrey.com/github/FileSaver.js
  */
  // The one and only way of getting global scope in all environments
  // https://stackoverflow.com/q/3277182/1008999
  var _global = typeof window === 'object' && window.window === window ? window : typeof self === 'object' && self.self === self ? self : typeof global === 'object' && global.global === global ? global : void 0;

  function bom(blob, opts) {
    if (typeof opts === 'undefined') opts = {
      autoBom: false
    };else if (typeof opts !== 'object') {
      console.warn('Depricated: Expected third argument to be a object');
      opts = {
        autoBom: !opts
      };
    } // prepend BOM for UTF-8 XML and text/* types (including HTML)
    // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF

    if (opts.autoBom && /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(blob.type)) {
      return new Blob([String.fromCharCode(0xFEFF), blob], {
        type: blob.type
      });
    }

    return blob;
  }

  function download(url, name, opts) {
    var xhr = new XMLHttpRequest();
    xhr.open('GET', url);
    xhr.responseType = 'blob';

    xhr.onload = function () {
      saveAs(xhr.response, name, opts);
    };

    xhr.onerror = function () {
      console.error('could not download file');
    };

    xhr.send();
  }

  function corsEnabled(url) {
    var xhr = new XMLHttpRequest(); // use sync to avoid popup blocker

    xhr.open('HEAD', url, false);
    xhr.send();
    return xhr.status >= 200 && xhr.status <= 299;
  } // `a.click()` doesn't work for all browsers (#465)


  function click(node) {
    try {
      node.dispatchEvent(new MouseEvent('click'));
    } catch (e) {
      var evt = document.createEvent('MouseEvents');
      evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80, 20, false, false, false, false, 0, null);
      node.dispatchEvent(evt);
    }
  }

  var saveAs = _global.saveAs || ( // probably in some web worker
  typeof window !== 'object' || window !== _global ? function saveAs() {}
  /* noop */
  // Use download attribute first if possible (#193 Lumia mobile)
  : 'download' in HTMLAnchorElement.prototype ? function saveAs(blob, name, opts) {
    var URL = _global.URL || _global.webkitURL;
    var a = document.createElement('a');
    name = name || blob.name || 'download';
    a.download = name;
    a.rel = 'noopener'; // tabnabbing
    // TODO: detect chrome extensions & packaged apps
    // a.target = '_blank'

    if (typeof blob === 'string') {
      // Support regular links
      a.href = blob;

      if (a.origin !== location.origin) {
        corsEnabled(a.href) ? download(blob, name, opts) : click(a, a.target = '_blank');
      } else {
        click(a);
      }
    } else {
      // Support blobs
      a.href = URL.createObjectURL(blob);
      setTimeout(function () {
        URL.revokeObjectURL(a.href);
      }, 4E4); // 40s

      setTimeout(function () {
        click(a);
      }, 0);
    }
  } // Use msSaveOrOpenBlob as a second approach
  : 'msSaveOrOpenBlob' in navigator ? function saveAs(blob, name, opts) {
    name = name || blob.name || 'download';

    if (typeof blob === 'string') {
      if (corsEnabled(blob)) {
        download(blob, name, opts);
      } else {
        var a = document.createElement('a');
        a.href = blob;
        a.target = '_blank';
        setTimeout(function () {
          click(a);
        });
      }
    } else {
      navigator.msSaveOrOpenBlob(bom(blob, opts), name);
    }
  } // Fallback to using FileReader and a popup
  : function saveAs(blob, name, opts, popup) {
    // Open a popup immediately do go around popup blocker
    // Mostly only avalible on user interaction and the fileReader is async so...
    popup = popup || open('', '_blank');

    if (popup) {
      popup.document.title = popup.document.body.innerText = 'downloading...';
    }

    if (typeof blob === 'string') return download(blob, name, opts);
    var force = blob.type === 'application/octet-stream';

    var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari;

    var isChromeIOS = /CriOS\/[\d]+/.test(navigator.userAgent);

    if ((isChromeIOS || force && isSafari) && typeof FileReader === 'object') {
      // Safari doesn't allow downloading of blob urls
      var reader = new FileReader();

      reader.onloadend = function () {
        var url = reader.result;
        url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;');
        if (popup) popup.location.href = url;else location = url;
        popup = null; // reverse-tabnabbing #460
      };

      reader.readAsDataURL(blob);
    } else {
      var URL = _global.URL || _global.webkitURL;
      var url = URL.createObjectURL(blob);
      if (popup) popup.location = url;else location.href = url;
      popup = null; // reverse-tabnabbing #460

      setTimeout(function () {
        URL.revokeObjectURL(url);
      }, 4E4); // 40s
    }
  });
  _global.saveAs = saveAs.saveAs = saveAs;

  if (typeof module !== 'undefined') {
    module.exports = saveAs;
  }
});


var api =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./noeval.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "../../node_modules/node-fetch/browser.js":
/*!**********************************************************************!*\
  !*** /home/sbrian/github6/JSxCAD/node_modules/node-fetch/browser.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n// ref: https://github.com/tc39/proposal-global\nvar getGlobal = function () {\n\t// the only reliable means to get the global object is\n\t// `Function('return this')()`\n\t// However, this causes CSP violations in Chrome apps.\n\tif (typeof self !== 'undefined') { return self; }\n\tif (typeof window !== 'undefined') { return window; }\n\tif (typeof global !== 'undefined') { return global; }\n\tthrow new Error('unable to locate global object');\n}\n\nvar global = getGlobal();\n\nmodule.exports = exports = global.fetch;\n\n// Needed for TypeScript and Webpack.\nexports.default = global.fetch.bind(global);\n\nexports.Headers = global.Headers;\nexports.Request = global.Request;\nexports.Response = global.Response;\n\n//# sourceURL=webpack://api//home/sbrian/github6/JSxCAD/node_modules/node-fetch/browser.js?");

/***/ }),

/***/ "../../node_modules/node-libs-browser/mock/empty.js":
/*!********************************************************************************!*\
  !*** /home/sbrian/github6/JSxCAD/node_modules/node-libs-browser/mock/empty.js ***!
  \********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("\n\n//# sourceURL=webpack://api//home/sbrian/github6/JSxCAD/node_modules/node-libs-browser/mock/empty.js?");

/***/ }),

/***/ "../../sys/files.js":
/*!************************************************!*\
  !*** /home/sbrian/github6/JSxCAD/sys/files.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("const files = {};\nconst fileCreationWatchers = [];\n\nconst getFile = (path) => {\n  let file = files[path];\n  if (file === undefined) {\n    file = { path: path, watchers: [] };\n    files[path] = file;\n    for (const watcher of fileCreationWatchers) {\n      watcher(file);\n    }\n  }\n  return file;\n};\n\nconst watchFileCreation = (thunk) => fileCreationWatchers.push(thunk);\n\nmodule.exports.getFile = getFile;\nmodule.exports.watchFileCreation = watchFileCreation;\n\n\n//# sourceURL=webpack://api//home/sbrian/github6/JSxCAD/sys/files.js?");

/***/ }),

/***/ "../../sys/main.js":
/*!***********************************************!*\
  !*** /home/sbrian/github6/JSxCAD/sys/main.js ***!
  \***********************************************/
/*! exports provided: readFile, readFileSync, watchFile, watchFileCreation, writeFileSync */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _readFile__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./readFile */ \"../../sys/readFile.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"readFile\", function() { return _readFile__WEBPACK_IMPORTED_MODULE_0__[\"readFile\"]; });\n\n/* harmony import */ var _readFileSync__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./readFileSync */ \"../../sys/readFileSync.js\");\n/* harmony import */ var _readFileSync__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_readFileSync__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"readFileSync\", function() { return _readFileSync__WEBPACK_IMPORTED_MODULE_1__[\"readFileSync\"]; });\n\n/* harmony import */ var _watchFile__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./watchFile */ \"../../sys/watchFile.js\");\n/* harmony import */ var _watchFile__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_watchFile__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"watchFile\", function() { return _watchFile__WEBPACK_IMPORTED_MODULE_2__[\"watchFile\"]; });\n\n/* harmony import */ var _files__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./files */ \"../../sys/files.js\");\n/* harmony import */ var _files__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_files__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"watchFileCreation\", function() { return _files__WEBPACK_IMPORTED_MODULE_3__[\"watchFileCreation\"]; });\n\n/* harmony import */ var _writeFileSync__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./writeFileSync */ \"../../sys/writeFileSync.js\");\n/* harmony import */ var _writeFileSync__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_writeFileSync__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"writeFileSync\", function() { return _writeFileSync__WEBPACK_IMPORTED_MODULE_4__[\"writeFileSync\"]; });\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=webpack://api//home/sbrian/github6/JSxCAD/sys/main.js?");

/***/ }),

/***/ "../../sys/readFile.js":
/*!***************************************************!*\
  !*** /home/sbrian/github6/JSxCAD/sys/readFile.js ***!
  \***************************************************/
/*! exports provided: readFile */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"readFile\", function() { return readFile; });\nconst fs = __webpack_require__(/*! fs */ \"../../node_modules/node-libs-browser/mock/empty.js\");\nconst readFileSyncBrowser = __webpack_require__(/*! ./readFileSyncBrowser */ \"../../sys/readFileSyncBrowser.js\");\nconst fetch = __webpack_require__(/*! node-fetch */ \"../../node_modules/node-fetch/browser.js\");\n\nconst readFile = (path, options) => {\n  if (path.startsWith('http://') || path.startsWith('https://')) {\n    if (fetch) {\n      return fetch(path).then(result => result.text());\n    } else {\n      return window.fetch(path).then(result => result.text());\n    }\n  }\n  if (fs.promises.readFile) {\n    return fs.promises.readFile(path, options);\n  } else {\n    return Promise.resolve(readFileSyncBrowser(path, options));\n  }\n};\n\n\n//# sourceURL=webpack://api//home/sbrian/github6/JSxCAD/sys/readFile.js?");

/***/ }),

/***/ "../../sys/readFileSync.js":
/*!*******************************************************!*\
  !*** /home/sbrian/github6/JSxCAD/sys/readFileSync.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("const fs = __webpack_require__(/*! fs */ \"../../node_modules/node-libs-browser/mock/empty.js\");\nconst readFileSyncBrowser = __webpack_require__(/*! ./readFileSyncBrowser */ \"../../sys/readFileSyncBrowser.js\");\n\nconst readFileSync = (path, options = {}) => {\n  if (fs.readFileSync) {\n    return fs.readFileSync(path, options);\n  } else {\n    return readFileSyncBrowser.readFileSync(path, options);\n  }\n};\n\nmodule.exports.readFileSync = readFileSync;\n\n\n//# sourceURL=webpack://api//home/sbrian/github6/JSxCAD/sys/readFileSync.js?");

/***/ }),

/***/ "../../sys/readFileSyncBrowser.js":
/*!**************************************************************!*\
  !*** /home/sbrian/github6/JSxCAD/sys/readFileSyncBrowser.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("const { getFile } = __webpack_require__(/*! ./files */ \"../../sys/files.js\");\n\nconst readFileSync = (path, options) => {\n  const file = getFile(path);\n  if (typeof file.data === 'function') {\n    // Force lazy evaluation.\n    file.data = file.data();\n  }\n  return file.data;\n};\n\nmodule.exports.readFileSync = readFileSync;\n\n\n//# sourceURL=webpack://api//home/sbrian/github6/JSxCAD/sys/readFileSyncBrowser.js?");

/***/ }),

/***/ "../../sys/watchFile.js":
/*!****************************************************!*\
  !*** /home/sbrian/github6/JSxCAD/sys/watchFile.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("const fs = __webpack_require__(/*! fs */ \"../../node_modules/node-libs-browser/mock/empty.js\");\nconst watchFileBrowser = __webpack_require__(/*! ./watchFileBrowser */ \"../../sys/watchFileBrowser.js\");\n\nconst watchFile = (path, thunk) => {\n  if (fs.writeFileSync) {\n  } else {\n    watchFileBrowser.watchFile(path, thunk);\n  }\n};\n\nmodule.exports.watchFile = watchFile;\n\n\n//# sourceURL=webpack://api//home/sbrian/github6/JSxCAD/sys/watchFile.js?");

/***/ }),

/***/ "../../sys/watchFileBrowser.js":
/*!***********************************************************!*\
  !*** /home/sbrian/github6/JSxCAD/sys/watchFileBrowser.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("const { getFile } = __webpack_require__(/*! ./files */ \"../../sys/files.js\");\n\nconst watchFile = (path, thunk) => getFile(path).watchers.push(thunk);\n\nmodule.exports.watchFile = watchFile;\n\n\n//# sourceURL=webpack://api//home/sbrian/github6/JSxCAD/sys/watchFileBrowser.js?");

/***/ }),

/***/ "../../sys/writeFileSync.js":
/*!********************************************************!*\
  !*** /home/sbrian/github6/JSxCAD/sys/writeFileSync.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("const fs = __webpack_require__(/*! fs */ \"../../node_modules/node-libs-browser/mock/empty.js\");\nconst writeFileSyncBrowser = __webpack_require__(/*! ./writeFileSyncBrowser */ \"../../sys/writeFileSyncBrowser.js\");\n\nconst writeFileSync = async (path, data, options = {}) => {\n  if (fs.writeFileSync) {\n    if (typeof data === 'function') {\n      data = data();\n    }\n    return fs.writeFileSync(path, await Promise.resolve(data), options);\n  } else {\n    return writeFileSyncBrowser.writeFileSync(path, data, options);\n  }\n};\n\nmodule.exports.writeFileSync = writeFileSync;\n\n\n//# sourceURL=webpack://api//home/sbrian/github6/JSxCAD/sys/writeFileSync.js?");

/***/ }),

/***/ "../../sys/writeFileSyncBrowser.js":
/*!***************************************************************!*\
  !*** /home/sbrian/github6/JSxCAD/sys/writeFileSyncBrowser.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("const { getFile } = __webpack_require__(/*! ./files */ \"../../sys/files.js\");\n\nconst writeFileSync = (path, data, options = {}) => {\n  const file = getFile(path);\n  file.data = data;\n  for (const watcher of file.watchers) {\n    watcher(file, options);\n  }\n};\n\nmodule.exports.writeFileSync = writeFileSync;\n\n\n//# sourceURL=webpack://api//home/sbrian/github6/JSxCAD/sys/writeFileSyncBrowser.js?");

/***/ }),

/***/ "./noeval.js":
/*!*******************!*\
  !*** ./noeval.js ***!
  \*******************/
/*! exports provided: toThreejsGeometry, readFile, readFileSync, watchFile, watchFileCreation, writeFileSync */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"toThreejsGeometry\", function() { return toThreejsGeometry; });\n/* harmony import */ var _jsxcad_sys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @jsxcad/sys */ \"../../sys/main.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"readFile\", function() { return _jsxcad_sys__WEBPACK_IMPORTED_MODULE_0__[\"readFile\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"readFileSync\", function() { return _jsxcad_sys__WEBPACK_IMPORTED_MODULE_0__[\"readFileSync\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"watchFile\", function() { return _jsxcad_sys__WEBPACK_IMPORTED_MODULE_0__[\"watchFile\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"watchFileCreation\", function() { return _jsxcad_sys__WEBPACK_IMPORTED_MODULE_0__[\"watchFileCreation\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"writeFileSync\", function() { return _jsxcad_sys__WEBPACK_IMPORTED_MODULE_0__[\"writeFileSync\"]; });\n\n\n\nconst toThreejsGeometry = (geometry) => geometry;\n\n\n//# sourceURL=webpack://api/./noeval.js?");

/***/ })

/******/ });
const { readFile, watchFile, watchFileCreation, writeFile } = api;
let pages = [];

const tag = (data, tags) => {
  data.tags = tags;
  return data;
}

const addPage = (element) => {
  element.style.display = 'none';
  document.getElementById("body").appendChild(element);
  pages.push(element);
}

const nextPage = () => {
  pages[0].style.display = 'none';
  pages.push(pages.shift());
  pages[0].style.display = 'block';
}

const lastPage = () => {
  pages[0].style.display = 'none';
  pages.unshift(pages.pop());
  pages[0].style.display = 'block';
}

const addDisplay = (path, { cameraPosition = [0, 0, 16], geometry} = {}) => {
  // Add a new display when we see a new file written.
  let datasets = [];
  let camera;
  let controls;
  let scene;
  let renderer;
  let stats;
  let mesh;
  let gui;
  let downloadButton;

  const toName = (geometry) => {
    if (geometry.tags !== undefined && geometry.tags.length >= 1) {
      return geometry.tags[0];
    }
  }

  const updateDatasets = (geometry) => {
    // Delete any previous dataset in the window.
    for (const { controller, mesh } of datasets) {
      if (controller) {
        gui.remove(controller);
      }
      scene.remove(mesh);
    }
    // Build new datasets from the written data, and display them.
    datasets = [];

    const walk = (geometry) => {
      if (geometry.assembly) {
        geometry.assembly.forEach(walk);
      } else if (geometry.threejsSegments) {
        const segments = geometry.threejsSegments; // pathsToThreejsSegments(geometry.paths);
        const dataset = {};
        const threejsGeometry = new THREE.Geometry();
        const material = new THREE.LineBasicMaterial({ color: 0xff0000 });
        for (const [[aX, aY, aZ], [bX, bY, bZ]] of segments) {
          threejsGeometry.vertices.push(new THREE.Vector3(aX, aY, aZ), new THREE.Vector3(bX, bY, bZ));
        }
        dataset.mesh = new THREE.LineSegments(threejsGeometry, material);
        dataset.name = toName(geometry);
        scene.add(dataset.mesh);
        datasets.push(dataset);
      } else if (geometry.threejsSolid) {
        const { positions, normals } = geometry.threejsSolid; // solidToThreejsSolid(geometry.solid);
        const dataset = {};
        const threejsGeometry = new THREE.BufferGeometry();
        threejsGeometry.addAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
        threejsGeometry.addAttribute('normal', new THREE.Float32BufferAttribute(normals, 3));
        const material = new THREE.MeshNormalMaterial();
        dataset.mesh = new THREE.Mesh(threejsGeometry, material);
        dataset.name = toName(geometry);
        scene.add(dataset.mesh);
        datasets.push(dataset);
      } else if (geometry.threejsSurface) {
        const { positions, normals } = geometry.threejsSurface; // surfaceToThreejsSurface(geometry.z0Surface);
        const dataset = {};
        const threejsGeometry = new THREE.BufferGeometry();
        threejsGeometry.addAttribute('position', new THREE.Float32BufferAttribute( positions, 3));
        threejsGeometry.addAttribute('normal', new THREE.Float32BufferAttribute( normals, 3));
        const material = new THREE.MeshNormalMaterial();
        dataset.mesh = new THREE.Mesh(threejsGeometry, material);
        dataset.name = toName(geometry);
        scene.add(dataset.mesh);
        datasets.push(dataset);
      }
    };

    walk(geometry);

    const controllers = {};
    for (const dataset of datasets) {
      if (dataset.name === undefined) { continue; }
      let controller = controllers[dataset.name]
      if (controller === undefined) {
        controller = gui.add({ visible: true }, 'visible').name(`Show ${dataset.name}?`);
        controllers[dataset.name] = controller;
      }
      controller.listen().onChange((value) => { dataset.mesh.visible = value; });
    }
  };

  if (typeof api.toThreejsGeometry !== 'undefined') {
    watchFile(path, (file, data) => {
                      if (data !== undefined) {
                        updateDatasets(api.toThreejsGeometry(data));
                      }
                     });
  }

  init();
  animate();
  function init() {
    //
    camera = new THREE.PerspectiveCamera( 27, window.innerWidth / window.innerHeight, 1, 3500 );
    [camera.position.x, camera.position.y, camera.position.z] = cameraPosition;
    //
    controls = new THREE.TrackballControls(camera);
    controls.rotateSpeed = 4.0;
    controls.zoomSpeed = 4.0;
    controls.panSpeed = 2.0;
    controls.noZoom = false;
    controls.noPan = false;
    controls.staticMoving = true;
    controls.dynamicDampingFactor = 0.1;
    controls.keys = [65, 83, 68];
    controls.addEventListener('change', render);
    //
    scene = new THREE.Scene();
    scene.background = new THREE.Color( 0x050505 );
    scene.add(camera);
    //
    var ambientLight = new THREE.AmbientLight( 0x222222 );
    scene.add( ambientLight );
    var light = new THREE.DirectionalLight( 0xffffff, 1 );
    light.position.set( 1, 1, 1 );
    camera.add(light);
    renderer = new THREE.WebGLRenderer( { antialias: true } );
    renderer.setPixelRatio( window.devicePixelRatio );
    renderer.setSize( window.innerWidth, window.innerHeight);
    // TODO: Something more clever than this.
    const viewerElement = document.createElement("div");
    viewerElement.id = `viewer:${path}`;
    viewerElement.appendChild(renderer.domElement);
    gui = new dat.GUI({ autoPlace: false });
    viewerElement.appendChild(gui.domElement);
    
    viewerElement.appendChild(makeDownloadButton());
    
    addPage(viewerElement);
    window.addEventListener( 'resize', onWindowResize, false );
  }
  function makeDownloadButton() {
    downloadButton = document.createElement("button");
    downloadButton.setAttribute("type", "button");
    downloadButton.appendChild(document.createTextNode("Download"));
    downloadButton.setAttribute("style", "position: absolute; top: 2px; right: 2px;");
    downloadButton.addEventListener("click", () => {
      const blob = new Blob([readFileSync(path)], {type: "text/plain;charset=utf-8"});
      saveAs(blob, path+'.stl');
    });
    return downloadButton;
  }
  function onWindowResize() {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    controls.handleResize();
    // renderer.setSize( window.innerWidth * 0.5, window.innerHeight * 0.5);
  }
  function animate() {
    requestAnimationFrame( animate );
    render();
    controls.update();
    // stats.update();
  }
  function render() {
    renderer.render( scene, camera );
  }

  if (geometry) {
    updateDatasets(geometry);
  }
};

if (typeof watchFileCreation !== 'undefined') {
  watchFileCreation(({ path }) => addDisplay(path));
}


</script><script>const runApp = () => {
  await writeFile("default", () => {}, {"assembly":[{"threejsSegments":[[[-1.5,-2.59809,0],[3,0,0]],[[3,0,0],[-1.5,2.59809,0]],[[-1.5,2.59809,0],[-1.5,-2.59809,0]]],"tags":["paths"],"isThreejsGeometry":true},{"threejsSolid":{"normals":[0.9341721347384871,-0.35682267679918794,0,0.9341721347384871,-0.35682267679918794,0,0.9341721347384871,-0.35682267679918794,0,0.9341721347384871,0.35682267679918794,0,0.9341721347384871,0.35682267679918794,0,0.9341721347384871,0.35682267679918794,0,0.35682267679918794,0,-0.9341721347384871,0.35682267679918794,0,-0.9341721347384871,0.35682267679918794,0,-0.9341721347384871,0.5773502691896258,0.5773502691896257,-0.5773502691896258,0.5773502691896258,0.5773502691896257,-0.5773502691896258,0.5773502691896258,0.5773502691896257,-0.5773502691896258,0.5773502691896258,-0.5773502691896257,-0.5773502691896258,0.5773502691896258,-0.5773502691896257,-0.5773502691896258,0.5773502691896258,-0.5773502691896257,-0.5773502691896258,0.35682267679918794,0,0.9341721347384871,0.35682267679918794,0,0.9341721347384871,0.35682267679918794,0,0.9341721347384871,0.5773502691896258,-0.5773502691896258,0.5773502691896257,0.5773502691896258,-0.5773502691896258,0.5773502691896257,0.5773502691896258,-0.5773502691896258,0.5773502691896257,0.5773502691896258,0.5773502691896257,0.5773502691896258,0.5773502691896258,0.5773502691896257,0.5773502691896258,0.5773502691896258,0.5773502691896257,0.5773502691896258,-0.9341721347384871,-0.35682267679918794,0,-0.9341721347384871,-0.35682267679918794,0,-0.9341721347384871,-0.35682267679918794,0,-0.9341721347384871,0.35682267679918794,0,-0.9341721347384871,0.35682267679918794,0,-0.9341721347384871,0.35682267679918794,0,-0.35682267679918794,0,0.9341721347384871,-0.35682267679918794,0,0.9341721347384871,-0.35682267679918794,0,0.9341721347384871,-0.5773502691896258,-0.5773502691896257,0.5773502691896258,-0.5773502691896258,-0.5773502691896257,0.5773502691896258,-0.5773502691896258,-0.5773502691896257,0.5773502691896258,-0.5773502691896257,0.5773502691896258,0.5773502691896258,-0.5773502691896257,0.5773502691896258,0.5773502691896258,-0.5773502691896257,0.5773502691896258,0.5773502691896258,-0.35682267679918794,0,-0.9341721347384871,-0.35682267679918794,0,-0.9341721347384871,-0.35682267679918794,0,-0.9341721347384871,-0.5773502691896258,0.5773502691896257,-0.5773502691896258,-0.5773502691896258,0.5773502691896257,-0.5773502691896258,-0.5773502691896258,0.5773502691896257,-0.5773502691896258,-0.5773502691896258,-0.5773502691896257,-0.5773502691896258,-0.5773502691896258,-0.5773502691896257,-0.5773502691896258,-0.5773502691896258,-0.5773502691896257,-0.5773502691896258,0,-0.9341721347384871,0.35682267679918794,0,-0.9341721347384871,0.35682267679918794,0,-0.9341721347384871,0.35682267679918794,0,0.9341721347384871,0.35682267679918794,0,0.9341721347384871,0.35682267679918794,0,0.9341721347384871,0.35682267679918794,0,0.9341721347384871,-0.35682267679918794,0,0.9341721347384871,-0.35682267679918794,0,0.9341721347384871,-0.35682267679918794,0,-0.9341721347384871,-0.35682267679918794,0,-0.9341721347384871,-0.35682267679918794,0,-0.9341721347384871,-0.35682267679918794],"positions":[0.85065,0,0.52573,0.52573,-0.85065,0,0.85065,0,-0.52573,0.85065,0,-0.52573,0.52573,0.85065,0,0.85065,0,0.52573,0.85065,0,-0.52573,0,-0.52573,-0.85065,0,0.52573,-0.85065,0.85065,0,-0.52573,0,0.52573,-0.85065,0.52573,0.85065,0,0.85065,0,-0.52573,0.52573,-0.85065,0,0,-0.52573,-0.85065,0,-0.52573,0.85065,0.85065,0,0.52573,0,0.52573,0.85065,0.52573,-0.85065,0,0.85065,0,0.52573,0,-0.52573,0.85065,0.85065,0,0.52573,0.52573,0.85065,0,0,0.52573,0.85065,-0.85065,0,-0.52573,-0.52573,-0.85065,0,-0.85065,0,0.52573,-0.85065,0,0.52573,-0.52573,0.85065,0,-0.85065,0,-0.52573,0,-0.52573,0.85065,0,0.52573,0.85065,-0.85065,0,0.52573,-0.85065,0,0.52573,-0.52573,-0.85065,0,0,-0.52573,0.85065,0,0.52573,0.85065,-0.52573,0.85065,0,-0.85065,0,0.52573,0,0.52573,-0.85065,0,-0.52573,-0.85065,-0.85065,0,-0.52573,-0.85065,0,-0.52573,-0.52573,0.85065,0,0,0.52573,-0.85065,-0.85065,0,-0.52573,0,-0.52573,-0.85065,-0.52573,-0.85065,0,0,-0.52573,0.85065,-0.52573,-0.85065,0,0.52573,-0.85065,0,0,0.52573,0.85065,0.52573,0.85065,0,-0.52573,0.85065,0,0,0.52573,-0.85065,-0.52573,0.85065,0,0.52573,0.85065,0,0,-0.52573,-0.85065,0.52573,-0.85065,0,-0.52573,-0.85065,0]},"tags":["solid"],"isThreejsGeometry":true},{"threejsSurface":{"normals":[0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1],"positions":[1,1,0,-1,1,0,-1,-1,0,-1,-1,0,-1,1,0,1,1,0,1,1,0,-1,-1,0,1,-1,0,1,-1,0,-1,-1,0,1,1,0]},"tags":["surface"],"isThreejsGeometry":true}],"isThreejsGeometry":true});
  nextPage();
}
document.addEventListener("DOMContentLoaded", runApp);
</script></body></html>