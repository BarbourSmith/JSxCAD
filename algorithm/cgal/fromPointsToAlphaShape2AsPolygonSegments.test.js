import { fromPointsToAlphaShape2AsPolygonSegments } from './fromPointsToAlphaShape2AsPolygonSegments.js';
import { initCgal } from './getCgal.js';
import test from 'ava';

test.beforeEach(async (t) => {
  await initCgal();
});

test('FromPointsToAlphaShape2AsSurfaceMesh', (t) => {
  const points = [
    [25, 20],
    [65, 20],
    [65, 55],
    [25, 55],
    [62, 24.25],
    [57.5, 29.25],
    [54.75, 35.5],
    [55.5, 41],
    [59.25, 48.25],
    [62.5, 51.5],
    [61.25, 53.5],
    [54.75, 51.5],
    [48, 48.75],
    [42.75, 47.75],
    [38, 48.25],
    [33.5, 48.75],
    [27.75, 52],
    [25.75, 49.75],
    [30.5, 45.25],
    [33.25, 39.5],
    [35.5, 32.75],
    [32.25, 24.5],
    [28.5, 22.75],
    [29.75, 20.25],
    [33.5, 22],
    [39.25, 24.5],
    [45.5, 25.5],
    [52, 24.5],
    [57.5, 21.75],
    [61.25, 20.25],
  ];

  const polygonSegments = fromPointsToAlphaShape2AsPolygonSegments(points, 1);
  t.deepEqual(polygonSegments, [
    [
      [25, 55],
      [25.75, 49.75],
    ],
    [
      [33.25, 39.5],
      [28.5, 22.75],
    ],
    [
      [61.25, 20.25],
      [65, 20],
    ],
    [
      [65, 55],
      [61.25, 53.5],
    ],
    [
      [57.5, 21.75],
      [61.25, 20.25],
    ],
    [
      [27.75, 52],
      [25, 55],
    ],
    [
      [29.75, 20.25],
      [33.5, 22],
    ],
    [
      [62.5, 51.5],
      [65, 55],
    ],
    [
      [28.5, 22.75],
      [25, 20],
    ],
    [
      [38, 48.25],
      [33.5, 48.75],
    ],
    [
      [59.25, 48.25],
      [62.5, 51.5],
    ],
    [
      [25, 20],
      [29.75, 20.25],
    ],
    [
      [42.75, 47.75],
      [38, 48.25],
    ],
    [
      [65, 20],
      [62, 24.25],
    ],
    [
      [48, 48.75],
      [42.75, 47.75],
    ],
    [
      [54.75, 35.5],
      [55.5, 41],
    ],
    [
      [52, 24.5],
      [57.5, 21.75],
    ],
    [
      [33.5, 22],
      [39.25, 24.5],
    ],
    [
      [39.25, 24.5],
      [45.5, 25.5],
    ],
    [
      [30.5, 45.25],
      [33.25, 39.5],
    ],
    [
      [25.75, 49.75],
      [30.5, 45.25],
    ],
    [
      [45.5, 25.5],
      [52, 24.5],
    ],
    [
      [33.5, 48.75],
      [27.75, 52],
    ],
    [
      [62, 24.25],
      [57.5, 29.25],
    ],
    [
      [61.25, 53.5],
      [54.75, 51.5],
    ],
    [
      [57.5, 29.25],
      [54.75, 35.5],
    ],
    [
      [54.75, 51.5],
      [48, 48.75],
    ],
    [
      [55.5, 41],
      [59.25, 48.25],
    ],
  ]);
});
