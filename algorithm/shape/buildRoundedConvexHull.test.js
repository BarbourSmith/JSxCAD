const { canonicalize, toPoints } = require('@jsxcad/algorithm-polygons');
const { isWatertightPolygons } = require('@jsxcad/algorithm-watertight');
const { unitCube } = require('@jsxcad/data-shape');
const buildRoundedConvexHull = require('./buildRoundedConvexHull');
const test = require('ava');

test('Simple rounded cube', t => {
  const polygons = buildRoundedConvexHull({ roundRadius: 0.1 }, toPoints({}, unitCube.unitCubePolygons));
  t.true(isWatertightPolygons(polygons));
  t.deepEqual(canonicalize(polygons),
              [[[0.58507, 0.5, -0.55257], [0.58507, -0.5, -0.55257], [0.5, -0.55257, -0.58507]],
               [[0.58507, 0.5, -0.55257], [0.5, -0.55257, -0.58507], [0.5, 0.55257, -0.58507]],
               [[-0.5, 0.55257, -0.58507], [0.5, 0.55257, -0.58507], [0.5, -0.55257, -0.58507]],
               [[-0.5, 0.55257, -0.58507], [0.5, -0.55257, -0.58507], [-0.5, -0.55257, -0.58507]],
               [[0.58507, -0.5, 0.55257], [0.58507, -0.5, -0.55257], [0.58507, 0.5, -0.55257]],
               [[0.58507, -0.5, 0.55257], [0.58507, 0.5, -0.55257], [0.58507, 0.5, 0.55257]],
               [[-0.55257, -0.58507, -0.5], [-0.58507, -0.5, -0.55257], [-0.5, -0.55257, -0.58507]],
               [[-0.58507, 0.5, 0.55257], [-0.58507, -0.5, 0.55257], [-0.5, -0.55257, 0.58507]],
               [[-0.58507, 0.5, 0.55257], [-0.5, -0.55257, 0.58507], [-0.5, 0.55257, 0.58507]],
               [[-0.55257, 0.58507, 0.5], [-0.58507, 0.5, 0.55257], [-0.5, 0.55257, 0.58507]],
               [[-0.58507, 0.5, -0.55257], [-0.55257, 0.58507, -0.5], [-0.5, 0.55257, -0.58507]],
               [[-0.58507, 0.5, -0.55257], [-0.5, 0.55257, -0.58507], [-0.5, -0.55257, -0.58507]],
               [[-0.58507, 0.5, -0.55257], [-0.5, -0.55257, -0.58507], [-0.58507, -0.5, -0.55257]],
               [[-0.58507, 0.5, -0.55257], [-0.58507, -0.5, -0.55257], [-0.58507, -0.5, 0.55257]],
               [[-0.58507, 0.5, -0.55257], [-0.58507, -0.5, 0.55257], [-0.58507, 0.5, 0.55257]],
               [[-0.58507, 0.5, -0.55257], [-0.58507, 0.5, 0.55257], [-0.55257, 0.58507, 0.5]],
               [[-0.58507, 0.5, -0.55257], [-0.55257, 0.58507, 0.5], [-0.55257, 0.58507, -0.5]],
               [[0.5, -0.55257, 0.58507], [0.55257, -0.58507, 0.5], [0.58507, -0.5, 0.55257]],
               [[0.5, -0.55257, 0.58507], [0.58507, -0.5, 0.55257], [0.58507, 0.5, 0.55257]],
               [[0.5, -0.55257, 0.58507], [0.58507, 0.5, 0.55257], [0.5, 0.55257, 0.58507]],
               [[0.5, -0.55257, 0.58507], [0.5, 0.55257, 0.58507], [-0.5, 0.55257, 0.58507]],
               [[0.5, -0.55257, 0.58507], [-0.5, 0.55257, 0.58507], [-0.5, -0.55257, 0.58507]],
               [[0.55257, -0.58507, -0.5], [-0.55257, -0.58507, -0.5], [-0.5, -0.55257, -0.58507]],
               [[0.55257, -0.58507, -0.5], [-0.5, -0.55257, -0.58507], [0.5, -0.55257, -0.58507]],
               [[0.55257, -0.58507, -0.5], [0.5, -0.55257, -0.58507], [0.58507, -0.5, -0.55257]],
               [[0.55257, -0.58507, -0.5], [0.58507, -0.5, -0.55257], [0.58507, -0.5, 0.55257]],
               [[0.55257, -0.58507, -0.5], [0.58507, -0.5, 0.55257], [0.55257, -0.58507, 0.5]],
               [[-0.55257, -0.58507, 0.5], [-0.5, -0.55257, 0.58507], [-0.58507, -0.5, 0.55257]],
               [[-0.55257, -0.58507, 0.5], [-0.58507, -0.5, 0.55257], [-0.58507, -0.5, -0.55257]],
               [[-0.55257, -0.58507, 0.5], [-0.58507, -0.5, -0.55257], [-0.55257, -0.58507, -0.5]],
               [[-0.55257, -0.58507, 0.5], [-0.55257, -0.58507, -0.5], [0.55257, -0.58507, -0.5]],
               [[-0.55257, -0.58507, 0.5], [0.55257, -0.58507, -0.5], [0.55257, -0.58507, 0.5]],
               [[-0.55257, -0.58507, 0.5], [0.55257, -0.58507, 0.5], [0.5, -0.55257, 0.58507]],
               [[-0.55257, -0.58507, 0.5], [0.5, -0.55257, 0.58507], [-0.5, -0.55257, 0.58507]],
               [[0.55257, 0.58507, 0.5], [-0.55257, 0.58507, 0.5], [-0.5, 0.55257, 0.58507]],
               [[0.55257, 0.58507, 0.5], [-0.5, 0.55257, 0.58507], [0.5, 0.55257, 0.58507]],
               [[0.55257, 0.58507, 0.5], [0.5, 0.55257, 0.58507], [0.58507, 0.5, 0.55257]],
               [[0.55257, 0.58507, -0.5], [0.5, 0.55257, -0.58507], [-0.5, 0.55257, -0.58507]],
               [[0.55257, 0.58507, -0.5], [-0.5, 0.55257, -0.58507], [-0.55257, 0.58507, -0.5]],
               [[0.55257, 0.58507, -0.5], [-0.55257, 0.58507, -0.5], [-0.55257, 0.58507, 0.5]],
               [[0.55257, 0.58507, -0.5], [-0.55257, 0.58507, 0.5], [0.55257, 0.58507, 0.5]],
               [[0.55257, 0.58507, -0.5], [0.55257, 0.58507, 0.5], [0.58507, 0.5, 0.55257]],
               [[0.55257, 0.58507, -0.5], [0.58507, 0.5, 0.55257], [0.58507, 0.5, -0.55257]],
               [[0.55257, 0.58507, -0.5], [0.58507, 0.5, -0.55257], [0.5, 0.55257, -0.58507]]]);
});
