import { canonicalize, toPoints } from '@jsxcad/algorithm-polygons';
import { isWatertightPolygons } from '@jsxcad/algorithm-watertight';
import { unitCube } from '@jsxcad/data-shape';
import { buildRoundedConvexHull } from './buildRoundedConvexHull';
import { test } from 'ava';

test('Simple rounded cube', t => {
  const polygons = buildRoundedConvexHull({ roundRadius: 0.1 }, toPoints({}, unitCube.unitCubePolygons));
  t.true(isWatertightPolygons(polygons));
  t.deepEqual(canonicalize(polygons),
              [[[0.58507, 0.5, -0.55257], [0.58507, -0.5, -0.55257], [0.5, -0.55257, -0.58507]],
               [[0.58507, 0.5, -0.55257], [0.5, -0.55257, -0.58507], [0.5, 0.55257, -0.58507]],
               [[-0.5, 0.55257, -0.58507], [0.5, 0.55257, -0.58507], [0.5, -0.55257, -0.58507]],
               [[-0.5, 0.55257, -0.58507], [0.5, -0.55257, -0.58507], [-0.5, -0.55257, -0.58507]],
               [[0.58507, -0.5, 0.55257], [0.58507, -0.5, -0.55257], [0.58507, 0.5, -0.55257]],
               [[0.58507, -0.5, 0.55257], [0.58507, 0.5, -0.55257], [0.58507, 0.5, 0.55257]],
               [[-0.55257, -0.58507, -0.5], [-0.58507, -0.5, -0.55257], [-0.5, -0.55257, -0.58507]],
               [[-0.58507, 0.5, 0.55257], [-0.58507, -0.5, 0.55257], [-0.5, -0.55257, 0.58507]],
               [[-0.58507, 0.5, 0.55257], [-0.5, -0.55257, 0.58507], [-0.5, 0.55257, 0.58507]],
               [[-0.55257, 0.58507, 0.5], [-0.58507, 0.5, 0.55257], [-0.5, 0.55257, 0.58507]],
               [[-0.58507, 0.5, -0.55257], [-0.55257, 0.58507, -0.5], [-0.5, 0.55257, -0.58507]],
               [[-0.58507, 0.5, -0.55257], [-0.5, 0.55257, -0.58507], [-0.5, -0.55257, -0.58507]],
               [[-0.58507, 0.5, -0.55257], [-0.5, -0.55257, -0.58507], [-0.58507, -0.5, -0.55257]],
               [[-0.58507, 0.5, -0.55257], [-0.58507, -0.5, -0.55257], [-0.58507, -0.5, 0.55257]],
               [[-0.58507, 0.5, -0.55257], [-0.58507, -0.5, 0.55257], [-0.58507, 0.5, 0.55257]],
               [[-0.58507, 0.5, -0.55257], [-0.58507, 0.5, 0.55257], [-0.55257, 0.58507, 0.5]],
               [[-0.58507, 0.5, -0.55257], [-0.55257, 0.58507, 0.5], [-0.55257, 0.58507, -0.5]],
               [[0.5, -0.55257, 0.58507], [0.55257, -0.58507, 0.5], [0.58507, -0.5, 0.55257]],
               [[0.5, -0.55257, 0.58507], [0.58507, -0.5, 0.55257], [0.58507, 0.5, 0.55257]],
               [[0.5, -0.55257, 0.58507], [0.58507, 0.5, 0.55257], [0.5, 0.55257, 0.58507]],
               [[0.5, -0.55257, 0.58507], [0.5, 0.55257, 0.58507], [-0.5, 0.55257, 0.58507]],
               [[0.5, -0.55257, 0.58507], [-0.5, 0.55257, 0.58507], [-0.5, -0.55257, 0.58507]],
               [[0.55257, -0.58507, -0.5], [-0.55257, -0.58507, -0.5], [-0.5, -0.55257, -0.58507]],
               [[0.55257, -0.58507, -0.5], [-0.5, -0.55257, -0.58507], [0.5, -0.55257, -0.58507]],
               [[0.55257, -0.58507, -0.5], [0.5, -0.55257, -0.58507], [0.58507, -0.5, -0.55257]],
               [[0.55257, -0.58507, -0.5], [0.58507, -0.5, -0.55257], [0.58507, -0.5, 0.55257]],
               [[0.55257, -0.58507, -0.5], [0.58507, -0.5, 0.55257], [0.55257, -0.58507, 0.5]],
               [[-0.55257, -0.58507, 0.5], [-0.5, -0.55257, 0.58507], [-0.58507, -0.5, 0.55257]],
               [[-0.55257, -0.58507, 0.5], [-0.58507, -0.5, 0.55257], [-0.58507, -0.5, -0.55257]],
               [[-0.55257, -0.58507, 0.5], [-0.58507, -0.5, -0.55257], [-0.55257, -0.58507, -0.5]],
               [[-0.55257, -0.58507, 0.5], [-0.55257, -0.58507, -0.5], [0.55257, -0.58507, -0.5]],
               [[-0.55257, -0.58507, 0.5], [0.55257, -0.58507, -0.5], [0.55257, -0.58507, 0.5]],
               [[-0.55257, -0.58507, 0.5], [0.55257, -0.58507, 0.5], [0.5, -0.55257, 0.58507]],
               [[-0.55257, -0.58507, 0.5], [0.5, -0.55257, 0.58507], [-0.5, -0.55257, 0.58507]],
               [[0.55257, 0.58507, 0.5], [-0.55257, 0.58507, 0.5], [-0.5, 0.55257, 0.58507]],
               [[0.55257, 0.58507, 0.5], [-0.5, 0.55257, 0.58507], [0.5, 0.55257, 0.58507]],
               [[0.55257, 0.58507, 0.5], [0.5, 0.55257, 0.58507], [0.58507, 0.5, 0.55257]],
               [[0.55257, 0.58507, -0.5], [0.5, 0.55257, -0.58507], [-0.5, 0.55257, -0.58507]],
               [[0.55257, 0.58507, -0.5], [-0.5, 0.55257, -0.58507], [-0.55257, 0.58507, -0.5]],
               [[0.55257, 0.58507, -0.5], [-0.55257, 0.58507, -0.5], [-0.55257, 0.58507, 0.5]],
               [[0.55257, 0.58507, -0.5], [-0.55257, 0.58507, 0.5], [0.55257, 0.58507, 0.5]],
               [[0.55257, 0.58507, -0.5], [0.55257, 0.58507, 0.5], [0.58507, 0.5, 0.55257]],
               [[0.55257, 0.58507, -0.5], [0.58507, 0.5, 0.55257], [0.58507, 0.5, -0.55257]],
               [[0.55257, 0.58507, -0.5], [0.58507, 0.5, -0.55257], [0.5, 0.55257, -0.58507]]]);
});
